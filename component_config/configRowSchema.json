{
  "type": "object",
  "title": "Endpoint Extraction Configuration",
  "required": [
    "endpoint",
    "date_from",
    "date_to"
  ],
  "properties": {
    "endpoint": {
      "type": "string",
      "title": "Endpoint",
      "description": "Select the API endpoint to extract",
      "enum": [
        "accounts",
        "activities",
        "activitiesCall",
        "activitiesChat",
        "activitiesEmail",
        "campaignsRecords",
        "contacts",
        "crmRecords",
        "queues",
        "statuses",
        "tickets",
        "users",
        "groups",
        "pauses",
        "templates"
      ],
      "propertyOrder": 100
    },
    "date_from": {
      "type": "string",
      "title": "Date From",
      "description": "Start date for extraction. Supported formats: 'today', 'yesterday', '5 hours ago', '3 days ago', '4 months ago', '2 years ago'. Used as filter for tickets, contacts, and activities endpoints.",
      "default": "7 days ago",
      "propertyOrder": 200
    },
    "date_to": {
      "type": "string",
      "title": "Date To",
      "description": "End date for extraction. Supported formats: 'today', 'yesterday', '5 hours ago', '3 days ago', '4 months ago', '2 years ago'. Used as filter for tickets, contacts, and activities endpoints.",
      "default": "today",
      "propertyOrder": 300
    },
    "discover_fields": {
      "type": "button",
      "format": "sync-action",
      "title": "Discover Available Fields",
      "options": {
        "async": {
          "label": "Discover Available Fields",
          "action": "listFields",
          "description": "Click to discover all available fields for this endpoint. The result will help you fill in the 'Fields to Extract' below."
        }
      },
      "propertyOrder": 400
    },
    "fields": {
      "type": "array",
      "title": "Fields to Extract",
      "description": "Specify which fields to extract for this endpoint (leave empty to extract all fields). You can type field names manually or use the 'Discover Available Fields' button above.",
      "format": "select",
      "uniqueItems": true,
      "items": {
        "type": "string"
      },
      "options": {
        "tags": true
      },
      "propertyOrder": 500
    },
    "destination": {
      "type": "object",
      "title": "Destination",
      "format": "group",
      "propertyOrder": 600,
      "properties": {
        "load_type": {
          "type": "string",
          "title": "Load Type",
          "enum": ["full_load", "incremental_load"],
          "default": "full_load",
          "description": "Full load replaces existing data. Incremental load appends new data.",
          "propertyOrder": 1
        },
        "primary_key": {
          "type": "array",
          "title": "Primary Key",
          "description": "Column(s) used as primary key for deduplication. Required for incremental load.",
          "format": "select",
          "uniqueItems": true,
          "items": {
            "type": "string"
          },
          "options": {
            "tags": true,
            "dependencies": {
              "load_type": "incremental_load"
            }
          },
          "propertyOrder": 2
        }
      }
    }
  }
}
